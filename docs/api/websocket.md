# WebSocket Protocol

<!-- Code generated by typegen. DO NOT EDIT. -->
<!-- Regenerate with: make types -->

Real-time communication protocol for the QNTX web interface.

## Endpoints

| Path | Purpose |
|------|--------|
| `/ws` | Main WebSocket (graph updates, job status, logs) |
| `/lsp` | ATS Language Server Protocol (completions, hover) |

## Message Types

All messages are JSON objects with a `type` field indicating the message type.

### Client → Server

#### `query`

Execute an ATS query

| Field | Description |
|-------|-------------|
| query | ATS query string |
| line | Cursor line position |
| cursor | Cursor column position |
| filename | Source file name |

### Server → Client

#### `job_update`

Async job status update

| Field | Description |
|-------|-------------|
| metadata | Additional metadata about the update |
| job | Job object with status, progress, etc. |

#### `daemon_status`

Pulse daemon status broadcast

| Field | Description |
|-------|-------------|
| running | Whether daemon is running |
| active_jobs | Number of active jobs |
| load_percent | Current load percentage |

#### `usage_update`

AI usage statistics update

| Field | Description |
|-------|-------------|
| total_cost | Total cost in USD |
| requests | Number of requests |
| tokens | Total tokens used |

#### `llm_stream`

Streaming LLM response chunks

| Field | Description |
|-------|-------------|
| job_id | Associated job ID |
| content | Text content chunk |
| done | Whether streaming is complete |

#### `plugin_health`

Plugin health status update

| Field | Description |
|-------|-------------|
| name | Plugin name |
| healthy | Health status |
| state | Plugin state (running/paused) |

## Type References

Full message type definitions are in [Server Types](../types/server.md).

[← Back to API Index](./README.md)
