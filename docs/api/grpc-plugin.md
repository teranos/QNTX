# Plugin gRPC API

<!-- Code generated by typegen. DO NOT EDIT. -->
<!-- Regenerate with: make types -->

gRPC interface for external QNTX domain plugins.

**Proto file**: [`plugin/grpc/protocol/domain.proto`](https://github.com/teranos/QNTX/blob/main/plugin/grpc/protocol/domain.proto)

## Service Methods

| Method | Request | Response | Streaming |
|--------|---------|----------|-----------|
| Metadata | Empty | MetadataResponse | No |
| Initialize | InitializeRequest | InitializeResponse | No |
| Shutdown | Empty | Empty | No |
| HandleHTTP | HTTPRequest | HTTPResponse | No |
| HandleWebSocket | WebSocketMessage | WebSocketMessage | Bidirectional |
| Health | Empty | HealthResponse | No |
| ConfigSchema | Empty | ConfigSchemaResponse | No |
| ExecuteJob | ExecuteJobRequest | ExecuteJobResponse | No |

### Metadata

Metadata returns plugin metadata

- **Request**: `Empty`
- **Response**: `MetadataResponse`

---

### Initialize

Initialize initializes the plugin

- **Request**: `InitializeRequest`
- **Response**: `InitializeResponse`

---

### Shutdown

Shutdown shuts down the plugin

- **Request**: `Empty`
- **Response**: `Empty`

---

### HandleHTTP

HandleHTTP handles an HTTP request

- **Request**: `HTTPRequest`
- **Response**: `HTTPResponse`

---

### HandleWebSocket

HandleWebSocket handles a WebSocket connection (bidirectional streaming)

- **Request**: `WebSocketMessage`
- **Response**: `WebSocketMessage`
- **Streaming**: bidi

---

### Health

Health checks plugin health

- **Request**: `Empty`
- **Response**: `HealthResponse`

---

### ConfigSchema

ConfigSchema returns the configuration schema for this plugin

- **Request**: `Empty`
- **Response**: `ConfigSchemaResponse`

---

### ExecuteJob

ExecuteJob executes an async job Used by Pulse to route jobs to plugin-registered handlers

- **Request**: `ExecuteJobRequest`
- **Response**: `ExecuteJobResponse`

---

## Message Types

### MetadataResponse

| Field | Type | Description |
|-------|------|-------------|
| name | string | - |
| version | string | - |
| qntx_version | string | - |
| description | string | - |
| author | string | - |
| license | string | - |

### InitializeRequest

| Field | Type | Description |
|-------|------|-------------|
| ats_store_endpoint | string | Service endpoints the plugin can call back to QNTX core Format: "host:port" for TCP (e.g., "localhost:50051")  Note: Database access is not provided - database is a hard boundary. Plugins should use attestations via ats_store_endpoint instead. ats_store_endpoint: gRPC endpoint for ATSStoreService Provides: Attestation creation, querying, and management |
| queue_endpoint | string | queue_endpoint: gRPC endpoint for QueueService Provides: Async job enqueue, status, and management |
| auth_token | string | auth_token: Simple token for authenticating with service endpoints Plugins must include this token in all service RPC calls |
| config | map<string, string> | Plugin-specific configuration values Simple types (string, int, bool) passed as string representations Complex types (maps, slices) JSON-encoded as strings Plugins should parse and validate values appropriate to their schema |

### HTTPRequest

| Field | Type | Description |
|-------|------|-------------|
| method | string | - |
| path | string | - |
| headers | HTTPHeader | - |
| body | bytes | - |

### HTTPResponse

| Field | Type | Description |
|-------|------|-------------|
| status_code | int32 | - |
| headers | HTTPHeader | - |
| body | bytes | - |

### HTTPHeader

HTTPHeader represents an HTTP header with support for multiple values. HTTP headers can have multiple values (e.g., Set-Cookie, Accept).

| Field | Type | Description |
|-------|------|-------------|
| name | string | - |
| values | string | - |

### WebSocketMessage

### HealthResponse

| Field | Type | Description |
|-------|------|-------------|
| healthy | bool | - |
| message | string | - |
| details | map<string, string> | - |

### ConfigSchemaResponse

| Field | Type | Description |
|-------|------|-------------|
| fields | map<string, ConfigFieldSchema> | Map of config field name to schema definition |

### ConfigFieldSchema

| Field | Type | Description |
|-------|------|-------------|
| type | string | Field type: "string", "number", "boolean", "array" |
| description | string | Human-readable description of what this field does |
| default_value | string | Default value (as string representation) |
| required | bool | Whether this field is required |
| min_value | string | For number types: minimum value (optional) |
| max_value | string | For number types: maximum value (optional) |
| pattern | string | For string types: validation pattern (regex, optional) |
| element_type | string | For array types: element type (optional) |

### InitializeResponse

InitializeResponse is returned by Initialize RPC

| Field | Type | Description |
|-------|------|-------------|
| handler_names | string | Handler names this plugin can execute Examples: ["python.script", "python.webhook", "ixgest.git"] Empty list means plugin provides no async handlers (backward compatible) |

### ExecuteJobRequest

ExecuteJobRequest is sent to plugins to execute an async job

| Field | Type | Description |
|-------|------|-------------|
| job_id | string | - |
| handler_name | string | - |
| payload | bytes | - |
| timeout_secs | int64 | - |

### ExecuteJobResponse

ExecuteJobResponse is returned after job execution

| Field | Type | Description |
|-------|------|-------------|
| success | bool | - |
| error | string | - |
| result | bytes | - |
| progress_current | int32 | Progress tracking (optional) - Pulse updates job.Progress |
| progress_total | int32 | - |
| cost_actual | double | Cost tracking (optional) - Pulse updates job.CostActual |

[‚Üê Back to API Index](./README.md)
