<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QNTX - typegen</title>
  <link rel="icon" type="image/jpeg" href="./qntx.jpg">
  <link rel="stylesheet" href="./css/core.css">
  <link rel="stylesheet" href="./css/docs.css">
</head>
<body>
<nav class="doc-nav">
  <a href="./index.html">
    <img src="./qntx.jpg" alt="QNTX" class="site-logo">Documentation Home
  </a>
</nav>
<h1>TypeGen - Type Generator</h1>
<p>Generate TypeScript (and other language) type definitions from Go structs.</p>
<h2>Quick Start</h2>
<pre><code class="language-bash"># Generate types to stdout
qntx typegen

# Generate to files
qntx typegen --output types/generated/

# Generate specific packages
qntx typegen --packages pulse/async,server
</code></pre>
<h2>Makefile Integration</h2>
<pre><code class="language-bash">make types        # Generate types
make types-check  # Verify types are up to date
</code></pre>
<h2>Struct Tags</h2>
<h3><code>json</code> Tag</h3>
<p>Controls field naming and optionality:</p>
<pre><code class="language-go">type Job struct {
    ID       string `json:"id"`              // Required field: "id"
    Status   string `json:"status,omitempty"` // Optional field: "status?"
    Internal string `json:"-"`                // Skipped
}
</code></pre>
<h3><code>tstype</code> Tag</h3>
<p>Override TypeScript type:</p>
<pre><code class="language-go">type Event struct {
    Timestamp time.Time `json:"timestamp" tstype:"Date"`
    Metadata  any       `json:"metadata" tstype:"Record&lt;string, unknown&gt;"`
}
</code></pre>
<p>Force optional:</p>
<pre><code class="language-go">Count int `json:"count" tstype:",optional"`  // count?: number
</code></pre>
<h3><code>readonly</code> Tag</h3>
<p>Generate readonly fields:</p>
<pre><code class="language-go">type Config struct {
    Version string `json:"version" readonly:""`  // readonly version: string
}
</code></pre>
<h2>Adding New Types</h2>
<ol>
<li>Add struct to appropriate package (e.g., <code>server/types.go</code>)</li>
<li>Add JSON tags: <code>json:"field_name"</code></li>
<li>Export the struct (capitalize first letter)</li>
<li>Run <code>make types</code></li>
<li>Import in TypeScript: <code>import { YourType } from '@/types/generated/typescript'</code></li>
</ol>
<h2>Troubleshooting</h2>
<p><strong>Types out of date in CI?</strong></p>
<ul>
<li>Run <code>make types</code> locally and commit the changes</li>
</ul>
<p><strong>Import not found?</strong></p>
<ul>
<li>Check the struct is exported (starts with capital letter)</li>
<li>Verify JSON tags are present</li>
<li>Check <code>types/generated/typescript/index.ts</code> includes your type</li>
</ul>
<p><strong>Wrong TypeScript type?</strong></p>
<ul>
<li>Use <code>tstype</code> tag to override: <code>`tstype:"YourCustomType"`</code></li>
</ul>
<h2>Future Languages</h2>
<p>Python, Rust, and Dart generators planned for v1.0.0.</p>
<footer class="site-footer">
  <p class="provenance">Generated by sitegen.nix at commit <a href="https://github.com/teranos/QNTX/commit/b664e41fac56a47a886ef727bc4342996b929f1d-dirty">b664e41-dirty</a></p>
</footer>
</body>
</html>
