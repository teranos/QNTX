<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QNTX - websocket</title>
  <link rel="icon" type="image/jpeg" href="../qntx.jpg">
  <link rel="stylesheet" href="../css/core.css">
  <link rel="stylesheet" href="../css/docs.css">
</head>
<body>
<nav class="doc-nav">
  <a href="../index.html">
    <img src="../qntx.jpg" alt="QNTX" class="site-logo">Documentation Home
  </a>
</nav>
<h1>WebSocket Protocol</h1>
<!-- Code generated by typegen. DO NOT EDIT. -->
<!-- Regenerate with: make types -->
<p>Real-time communication protocol for the QNTX web interface.</p>
<h2>Endpoints</h2>
<table><thead><tr><th>Path</th><th>Purpose</th></tr></thead><tbody>
<tr><td><code>/ws</code></td><td>Main WebSocket (graph updates, job status, logs)</td></tr>
<tr><td><code>/lsp</code></td><td>ATS Language Server Protocol (completions, hover)</td></tr>
</tbody></table>
<h2>Message Types</h2>
<p>All messages are JSON objects with a <code>type</code> field indicating the message type.</p>
<h3>Client → Server</h3>
<h4><code>query</code></h4>
<p>Execute an ATS query</p>
<table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody>
<tr><td>cursor</td><td>Cursor column position</td></tr>
<tr><td>filename</td><td>Source file name</td></tr>
<tr><td>query</td><td>ATS query string</td></tr>
<tr><td>line</td><td>Cursor line position</td></tr>
</tbody></table>
<h3>Server → Client</h3>
<h4><code>job_update</code></h4>
<p>Async job status update</p>
<table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody>
<tr><td>job</td><td>Job object with status, progress, etc.</td></tr>
<tr><td>metadata</td><td>Additional metadata about the update</td></tr>
</tbody></table>
<h4><code>daemon_status</code></h4>
<p>Pulse daemon status broadcast</p>
<table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody>
<tr><td>running</td><td>Whether daemon is running</td></tr>
<tr><td>active_jobs</td><td>Number of active jobs</td></tr>
<tr><td>load_percent</td><td>Current load percentage</td></tr>
</tbody></table>
<h4><code>usage_update</code></h4>
<p>AI usage statistics update</p>
<table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody>
<tr><td>total_cost</td><td>Total cost in USD</td></tr>
<tr><td>requests</td><td>Number of requests</td></tr>
<tr><td>tokens</td><td>Total tokens used</td></tr>
</tbody></table>
<h4><code>llm_stream</code></h4>
<p>Streaming LLM response chunks</p>
<table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody>
<tr><td>content</td><td>Text content chunk</td></tr>
<tr><td>done</td><td>Whether streaming is complete</td></tr>
<tr><td>job_id</td><td>Associated job ID</td></tr>
</tbody></table>
<h4><code>plugin_health</code></h4>
<p>Plugin health status update</p>
<table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody>
<tr><td>healthy</td><td>Health status</td></tr>
<tr><td>state</td><td>Plugin state (running/paused)</td></tr>
<tr><td>name</td><td>Plugin name</td></tr>
</tbody></table>
<h2>Type References</h2>
<p>Full message type definitions are in <a href="../types/server.html">Server Types</a>.</p>
<p><a href="./README.html">← Back to API Index</a></p>
<footer class="site-footer">
  <p class="provenance">Generated by sitegen.nix at commit <a href="https://github.com/teranos/QNTX/commit/0e7ca38dd1dcce5d67e9797b91950b21353f137a-dirty">0e7ca38-dirty</a></p>
</footer>
</body>
</html>
