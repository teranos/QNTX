<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QNTX - phase-2-qntx-crate</title>
  <link rel="icon" type="image/jpeg" href="../qntx.jpg">
  <link rel="stylesheet" href="../css/core.css">
  <link rel="stylesheet" href="../css/docs.css">
</head>
<body>
<nav class="doc-nav">
  <a href="../index.html">
    <img src="../qntx.jpg" alt="QNTX" class="site-logo">Documentation Home
  </a>
</nav>
<h1>Phase 2: QNTX Shared Rust Crate - Remaining Work</h1>
<h2>⚠️ CRITICAL TODO: Delete Legacy Types Directory</h2>
<p><strong><code>types/generated/rust/</code> must be deleted after updating typegen.</strong></p>
<p>Current state (transitional):</p>
<ul>
<li>typegen outputs to <code>types/generated/rust/</code></li>
<li>flake.nix syncs files to <code>crates/qntx/src/types/</code></li>
<li>Legacy directory excluded from workspace but still exists</li>
</ul>
<p>To complete:</p>
<ol>
<li>Update <code>cmd/qntx/commands/typegen.go</code> to output Rust types directly to <code>crates/qntx/src/types/</code></li>
<li>Update <code>typegen/rust/index.go</code> to skip generating <code>lib.rs</code>, <code>Cargo.toml</code>, <code>README.md</code> when outputting to embedded location</li>
<li>Update <code>typegen/check.go</code> to use new path for Rust types</li>
<li>Remove sync step from <code>flake.nix</code> generate-types</li>
<li><strong>Delete <code>types/generated/rust/</code> directory</strong></li>
<li>Remove from workspace <code>exclude</code> list</li>
</ol>
<hr />
<h2>Completed (Phase 1)</h2>
<ul>
<li>[x] Cargo workspace at project root</li>
<li>[x] <code>crates/qntx/</code> with types, plugin scaffolding, error handling, tracing</li>
<li>[x] <code>qntx-python-plugin</code> and <code>qntx-app</code> migrated to use <code>qntx</code> crate</li>
<li>[x] Type sync from <code>types/generated/rust/</code> to <code>crates/qntx/src/types/</code></li>
<li>[x] <code>qntx-inference</code> plugin created</li>
</ul>
<h2>Phase 2 Tasks</h2>
<ol>
<li>
<p><strong>Update typegen to output directly to <code>crates/qntx/src/types/</code></strong> - Remove the sync step by having typegen generate types in place, skipping lib.rs/mod.rs generation for the embedded location.</p>
</li>
<li>
<p><strong>Migrate <code>qntx-python-plugin</code> to use shared proto definitions</strong> - Replace its local proto compilation with imports from <code>qntx::plugin::proto</code>.</p>
</li>
<li>
<p><strong>Add <code>qntx-python-plugin</code> integration with <code>qntx</code> types</strong> - Use <code>qntx::types::{Job, JobStatus}</code> for job lifecycle consistency.</p>
</li>
<li>
<p><strong>Move workspace profiles to root Cargo.toml</strong> - Consolidate release profiles from individual crates.</p>
</li>
</ol>
<footer class="site-footer">
  <p class="provenance">Generated by sitegen.nix at commit <a href="https://github.com/teranos/QNTX/commit/0e7ca38dd1dcce5d67e9797b91950b21353f137a-dirty">0e7ca38-dirty</a></p>
</footer>
</body>
</html>
