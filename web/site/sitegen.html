<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QNTX Sitegen</title>
  <link rel="icon" type="image/jpeg" href="./qntx.jpg">
  <link rel="stylesheet" href="./css/core.css">
  <link rel="stylesheet" href="./css/docs.css">
</head>
<body>
<nav class="doc-nav">
  <a href="./index.html">
    <img src="./qntx.jpg" alt="QNTX" class="site-logo">Documentation Home
  </a>
</nav>
<h1>Documentation Generator</h1>
<p>This documentation site is generated by <code>sitegen.nix</code>, a pure Nix static site generator.
   No external tools or build steps required beyond Nix itself.</p>

<section class="download-section">
  <h2>Features</h2>
  <table class="nix-table">
  <thead><tr><th>Feature</th><th>Description</th></tr></thead>
  <tbody>
    <tr><td><strong>Pure Nix</strong></td><td>Entire generator written in Nix - no shell scripts, no external build tools</td></tr>
<tr><td><strong>Markdown to HTML</strong></td><td>Converts <code>docs/*.md</code> to HTML using <a href="https://github.com/raphlinus/pulldown-cmark">pulldown-cmark</a></td></tr>
<tr><td><strong>SEG Symbol Navigation</strong></td><td>Categories marked with semantic symbols: ⍟ Getting Started, ⌬ Architecture, ⨳ Development, ≡ Types, ⋈ API</td></tr>
<tr><td><strong>Dark Mode</strong></td><td>Automatic dark/light theme via <code>prefers-color-scheme</code></td></tr>
<tr><td><strong>GitHub Releases</strong></td><td>Dynamic release downloads fetched client-side from GitHub API</td></tr>
<tr><td><strong>Provenance</strong></td><td>Every page shows commit, tag, date, CI user, and pipeline info</td></tr>
<tr><td><strong>Self-documenting Infra</strong></td><td>Nix packages, apps, and containers documented from flake metadata</td></tr>
<tr><td><strong>Incremental Builds</strong></td><td>Each markdown file is a separate derivation for faster rebuilds</td></tr>
  </tbody>
</table>
</section>
<section class="download-section">
  <h2>Generated Structure</h2>
  <p>This structure is generated dynamically from the actual sitegen outputs
   (53 documentation files discovered):</p>
<div class="install-code">qntx-docs-site/
├── build-info.json  # Provenance metadata
├── downloads.html  # Release downloads (GitHub API)
├── index.html  # Main documentation index
├── infrastructure.html  # Nix build documentation
├── qntx.jpg  # Logo
├── sitegen.html  # This page
├── css/
│   ├── core.css
│   ├── docs.css
│   └── utilities.css
├── js/
│   └── releases.js
├── api/
│   ├── README.html
│   ├── configuration.html
│   ├── grpc-plugin.html
│   ├── health-status.html
│   ├── plugins.html
│   ├── prose-documents.html
│   ├── pulse-executions.html
│   ├── pulse-jobs.html
│   ├── pulse-schedules.html
│   └── websocket.html
├── architecture/
│   ├── ADR-001-domain-plugin-architecture.html
│   ├── ADR-002-plugin-configuration.html
│   ├── ADR-003-plugin-communication.html
│   ├── bounded-storage.html
│   ├── budget-tracking.html
│   ├── config-system.html
│   ├── pulse-async-ix.html
│   ├── pulse-resource-coordination.html
│   └── two-phase-jobs.html
├── development/
│   ├── config-panel.html
│   ├── design-philosophy.html
│   ├── domain-plugin-api-reference.html
│   ├── external-plugin-guide.html
│   ├── grace.html
│   ├── migrating-to-plugins.html
│   ├── pulse-execution-history.html
│   ├── task-logging.html
│   └── verbosity.html
├── getting-started/
│   └── local-inference.html
├── plans/
│   └── phase-2-qntx-crate.html
├── security/
│   └── ssrf-protection.html
├── testing/
│   ├── pr-241-manual-test-checklist.html
│   └── pulse-inline-scheduling-tests.html
├── types/
│   ├── README.html
│   ├── async.html
│   ├── budget.html
│   ├── git.html
│   ├── github.html
│   ├── graph.html
│   ├── schedule.html
│   ├── server.html
│   ├── sym.html
│   └── types.html
└── vision/
    └── tile-based-semantic-ui.html</div>

</section>
<section class="download-section">
  <h2>How It Works</h2>
  <h3>1. Markdown Discovery</h3>
<p>Uses <code>lib.filesystem.listFilesRecursive</code> to find all <code>.md</code> files in <code>docs/</code>:</p>
<div class="install-code">markdownFiles = lib.filter (path: lib.hasSuffix ".md" (toString path))
  (lib.filesystem.listFilesRecursive ./docs);</div>

<h3>2. Per-file Derivations</h3>
<p>Each markdown file becomes its own Nix derivation, enabling incremental builds:</p>
<div class="install-code">mkHtmlDerivation = fileInfo:
  pkgs.runCommand "qntx-doc-${fileInfo.name}" {
    nativeBuildInputs = [ pkgs.pulldown-cmark ];
  } ''
    pulldown-cmark input.md > $out/output.html
  '';</div>

<h3>3. Compositional Assembly</h3>
<p>All derivations combined with <code>symlinkJoin</code>:</p>
<div class="install-code">pkgs.symlinkJoin {
  name = "qntx-docs-site";
  paths = [ staticAssets ] ++ lib.attrValues outputs ++ htmlDerivations;
}</div>

</section>
<section class="download-section">
  <h2>Provenance Parameters</h2>
  <p>Sitegen accepts these parameters for build provenance:</p>
<table class="nix-table">
  <thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead>
  <tbody>
    <tr><td><code>gitRevision</code></td><td>string</td><td>Full commit hash</td></tr>
<tr><td><code>gitShortRev</code></td><td>string</td><td>Short commit hash (displayed)</td></tr>
<tr><td><code>gitTag</code></td><td>string?</td><td>Release tag (e.g., "v1.0.0")</td></tr>
<tr><td><code>buildDate</code></td><td>string?</td><td>Build date (e.g., "2025-01-08")</td></tr>
<tr><td><code>ciUser</code></td><td>string?</td><td>CI actor (e.g., "github-actions")</td></tr>
<tr><td><code>ciPipeline</code></td><td>string?</td><td>Workflow name</td></tr>
<tr><td><code>ciRunId</code></td><td>string?</td><td>GitHub Actions run ID (links to run)</td></tr>
  </tbody>
</table>

</section>
<section class="download-section">
  <h2>Infrastructure Metadata</h2>
  <p>Pass Nix infrastructure metadata to generate the infrastructure page:</p>
<table class="nix-table">
  <thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead>
  <tbody>
    <tr><td><code>nixPackages</code></td><td>[{name, description}]</td><td>List of buildable packages</td></tr>
<tr><td><code>nixApps</code></td><td>[{name, description}]</td><td>List of runnable apps</td></tr>
<tr><td><code>nixContainers</code></td><td>[{name, description, image, architectures, ports}]</td><td>List of container images</td></tr>
  </tbody>
</table>

</section>
<section class="download-section">
  <h2>Building the Site</h2>
  <div class="install-code"># Build docs site
nix build .#docs-site

# Copy to web/site/ for serving
nix run .#build-docs-site

# Serve locally (example with Python)
cd result && python -m http.server 8000</div>
</section>
<section class="download-section">
  <h2>Adding Documentation</h2>
  <p>To add new documentation:</p>
<ol>
  <li>Create a markdown file in <code>docs/</code> (e.g., <code>docs/guides/my-guide.md</code>)</li>
  <li>The file will be automatically discovered and converted to HTML</li>
  <li>Category is determined by the first directory (e.g., <code>guides/</code>)</li>
  <li>Links between docs: use <code>.md</code> extension (auto-rewritten to <code>.html</code>)</li>
</ol>

</section>
<section class="download-section">
  <h2>SEG Category Mapping</h2>
  <p>Directories are mapped to SEG symbols for semantic navigation
   (8 categories defined):</p>
<table class="nix-table">
  <thead><tr><th>Directory</th><th>Symbol</th><th>Meaning</th></tr></thead>
  <tbody>
    <tr><td><code>getting-started/</code></td><td>⍟</td><td>Entry points</td></tr>
<tr><td><code>architecture/</code></td><td>⌬</td><td>System design</td></tr>
<tr><td><code>development/</code></td><td>⨳</td><td>Workflows</td></tr>
<tr><td><code>types/</code></td><td>≡</td><td>Type reference</td></tr>
<tr><td><code>api/</code></td><td>⋈</td><td>API reference</td></tr>
<tr><td><code>security/</code></td><td>+</td><td>Security</td></tr>
<tr><td><code>testing/</code></td><td>✦</td><td>Test guides</td></tr>
<tr><td><code>vision/</code></td><td>⟶</td><td>Future direction</td></tr>
  </tbody>
</table>

</section>

<footer class="site-footer">
  <p class="provenance">Generated by sitegen.nix at commit <a href="https://github.com/teranos/QNTX/commit/0e7ca38dd1dcce5d67e9797b91950b21353f137a-dirty">0e7ca38-dirty</a></p>
</footer>

</body>
</html>