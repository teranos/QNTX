// Code generated by typegen from Go source. DO NOT EDIT.
// Regenerate with: make types
// Source package: server
// Source last modified: 2026-01-06T02:48:13+00:00
// Source version: 6c02b62

//! # server module
//!
//! Generated from Go package: server
//!
//! This module contains auto-generated type definitions.
//! All types include serde Serialize/Deserialize traits for JSON compatibility.

#![allow(clippy::all)]
#![allow(unused_imports)]

use crate::{Execution, Job};

/// ChildJobInfo represents a child job summary
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#childjobinfo>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct ChildJobInfo {
    pub id: String,
    pub handler_name: String,
    pub source: String,
    pub status: String,
    pub progress_pct: f64,
    pub cost_estimate: f64,
    pub cost_actual: f64,
    #[serde(skip_serializing_if = "Option::is_none")]
    pub error: Option<String>,
    pub created_at: String,
    #[serde(skip_serializing_if = "Option::is_none")]
    pub started_at: Option<String>,
    #[serde(skip_serializing_if = "Option::is_none")]
    pub completed_at: Option<String>,
}

/// CompleteMessage represents import completion
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#completemessage>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct CompleteMessage {
    /// "import_complete"
    pub r#type: String,
    /// Completion message
    pub message: String,
}

/// ConsoleLog represents a browser console message
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#consolelog>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct ConsoleLog {
    pub timestamp: String,
    /// error, warn, info, debug
    pub level: String,
    pub message: String,
    #[serde(skip_serializing_if = "Option::is_none")]
    pub stack: Option<String>,
    #[serde(skip_serializing_if = "Option::is_none")]
    pub url: Option<String>,
}

/// CreateScheduledJobRequest represents the request to create a new scheduled job
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#createscheduledjobrequest>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct CreateScheduledJobRequest {
    /// ATS code to execute (e.g., "ix https://...")
    pub ats_code: String,
    /// Execution interval in seconds
    pub interval_seconds: i64,
    #[serde(skip_serializing_if = "Option::is_none")]
    /// Optional: ProseMirror document ID
    pub created_from_doc: Option<String>,
    #[serde(skip_serializing_if = "Option::is_none")]
    /// Optional: JSON metadata
    pub metadata: Option<String>,
    #[serde(skip_serializing_if = "Option::is_none")]
    /// Bypass deduplication checks (force execution)
    pub force: Option<bool>,
}

/// DaemonStatusMessage represents daemon status update
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#daemonstatusmessage>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct DaemonStatusMessage {
    /// "daemon_status"
    pub r#type: String,
    /// Is daemon running
    pub running: bool,
    /// Number of active jobs
    pub active_jobs: i64,
    /// Number of queued jobs
    pub queued_jobs: i64,
    /// CPU/processing load (0-100)
    pub load_percent: f64,
    /// Daily budget spent
    pub budget_daily: f64,
    /// Weekly budget spent
    pub budget_weekly: f64,
    /// Monthly budget spent
    pub budget_monthly: f64,
    /// Daily budget limit (config)
    pub budget_daily_limit: f64,
    /// Weekly budget limit (config)
    pub budget_weekly_limit: f64,
    /// Monthly budget limit (config)
    pub budget_monthly_limit: f64,
    /// GRACE Phase 4: "running", "draining", "stopped"
    pub server_state: String,
    /// Unix timestamp
    pub timestamp: i64,
}

/// ErrorResponse represents an API error
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#errorresponse>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct ErrorResponse {
    pub error: String,
}

/// JobChildrenResponse represents the response for GET /api/pulse/jobs/:id/children
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#jobchildrenresponse>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct JobChildrenResponse {
    pub parent_job_id: String,
    pub children: Vec<ChildJobInfo>,
}

/// JobStagesResponse represents the response for GET /jobs/:job_id/stages
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#jobstagesresponse>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct JobStagesResponse {
    pub job_id: String,
    pub stages: Vec<StageInfo>,
}

/// JobUpdateMessage represents async IX job update
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#jobupdatemessage>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct JobUpdateMessage {
    /// "job_update"
    pub r#type: String,
    #[serde(skip_serializing_if = "Option::is_none")]
    /// Full job details (from pulse/async)
    pub job: Option<Job>,
    /// Additional metadata
    pub metadata: serde_json::Map<String, serde_json::Value>,
}

/// LLMStreamMessage represents streaming LLM output
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#llmstreammessage>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct LLMStreamMessage {
    /// "llm_stream"
    pub r#type: String,
    /// Job ID this stream belongs to
    pub job_id: String,
    #[serde(skip_serializing_if = "Option::is_none")]
    /// Optional task ID within job (for sub-tasks)
    pub task_id: Option<String>,
    /// Token/chunk of text
    pub content: String,
    /// True when stream is complete
    pub done: bool,
    #[serde(skip_serializing_if = "Option::is_none")]
    /// Model name
    pub model: Option<String>,
    #[serde(skip_serializing_if = "Option::is_none")]
    /// Current stage (e.g., "extraction")
    pub stage: Option<String>,
    #[serde(skip_serializing_if = "Option::is_none")]
    /// Error message if streaming failed
    pub error: Option<String>,
}

/// ListExecutionsResponse represents the response for listing job executions
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#listexecutionsresponse>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct ListExecutionsResponse {
    /// From pulse/schedule
    pub executions: Vec<Execution>,
    pub count: i64,
    pub total: i64,
    pub has_more: bool,
}

/// ListScheduledJobsResponse represents the response for listing scheduled jobs
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#listscheduledjobsresponse>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct ListScheduledJobsResponse {
    pub jobs: Vec<ScheduledJobResponse>,
    pub count: i64,
}

/// LogEntry represents a single log entry
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#logentry>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct LogEntry {
    pub timestamp: String,
    pub level: String,
    pub message: String,
    #[serde(skip_serializing_if = "Option::is_none")]
    pub metadata: Option<serde_json::Map<String, serde_json::Value>>,
}

/// ParsedATSCode contains the pre-computed values for a scheduled job
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#parsedatscode>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct ParsedATSCode {
    /// HandlerName is the async handler to invoke (e.g., "ixgest.git")
    pub handler_name: String,
    /// Payload is the pre-computed JSON payload for the handler
    pub payload: Vec<u8>,
    /// SourceURL is used for deduplication (e.g., the git repo URL)
    pub source_url: String,
}

/// PluginHealthMessage represents a plugin health status update
/// Broadcast when plugin state changes (pause/resume) or health check fails
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#pluginhealthmessage>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct PluginHealthMessage {
    /// "plugin_health"
    pub r#type: String,
    /// Plugin name
    pub name: String,
    /// Current health status
    pub healthy: bool,
    /// "running", "paused", "stopped"
    pub state: String,
    /// Status message
    pub message: String,
    /// Unix timestamp
    pub timestamp: i64,
}

#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#plugininfo>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct PluginInfo {
    pub name: String,
    pub version: String,
    #[serde(skip_serializing_if = "Option::is_none")]
    pub qntx_version: Option<String>,
    pub description: String,
    #[serde(skip_serializing_if = "Option::is_none")]
    pub author: Option<String>,
    #[serde(skip_serializing_if = "Option::is_none")]
    pub license: Option<String>,
    pub healthy: bool,
    #[serde(skip_serializing_if = "Option::is_none")]
    pub message: Option<String>,
    #[serde(skip_serializing_if = "Option::is_none")]
    pub details: Option<serde_json::Map<String, serde_json::Value>>,
    pub state: String,
    pub pausable: bool,
}

/// ProgressMessage represents an import progress message
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#progressmessage>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct ProgressMessage {
    /// "import_progress"
    pub r#type: String,
    /// Current item being processed
    pub current: i64,
    /// Total items to process
    pub total: i64,
    /// Status message
    pub message: String,
}

/// ProseEntry represents a prose content file or directory
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#proseentry>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct ProseEntry {
    pub name: String,
    pub path: String,
    #[serde(rename = "isDir")]
    pub is_dir: bool,
    #[serde(skip_serializing_if = "Option::is_none")]
    pub children: Option<Vec<ProseEntry>>,
}

/// PulseExecutionCompletedMessage represents a Pulse execution that completed successfully
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#pulseexecutioncompletedmessage>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct PulseExecutionCompletedMessage {
    /// "pulse_execution_completed"
    pub r#type: String,
    /// Job that completed
    pub scheduled_job_id: String,
    /// Execution record ID
    pub execution_id: String,
    /// ATS code that was executed
    pub ats_code: String,
    /// Created async job ID
    pub async_job_id: String,
    /// Brief result description
    pub result_summary: String,
    /// Execution duration
    pub duration_ms: i64,
    /// Unix timestamp
    pub timestamp: i64,
}

/// PulseExecutionFailedMessage represents a Pulse execution that failed
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#pulseexecutionfailedmessage>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct PulseExecutionFailedMessage {
    /// "pulse_execution_failed"
    pub r#type: String,
    /// Job that failed
    pub scheduled_job_id: String,
    /// Execution record ID
    pub execution_id: String,
    /// ATS code that was executed
    pub ats_code: String,
    /// Error description
    pub error_message: String,
    /// How long before failure
    pub duration_ms: i64,
    /// Unix timestamp
    pub timestamp: i64,
}

/// PulseExecutionLogStreamMessage represents live log output from a running execution
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#pulseexecutionlogstreammessage>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct PulseExecutionLogStreamMessage {
    /// "pulse_execution_log_stream"
    pub r#type: String,
    /// Job being executed
    pub scheduled_job_id: String,
    /// Execution record ID
    pub execution_id: String,
    /// Log text chunk
    pub log_chunk: String,
    /// Unix timestamp
    pub timestamp: i64,
}

/// PulseExecutionStartedMessage represents a Pulse execution that just started
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#pulseexecutionstartedmessage>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct PulseExecutionStartedMessage {
    /// "pulse_execution_started"
    pub r#type: String,
    /// Job that's executing
    pub scheduled_job_id: String,
    /// Execution record ID
    pub execution_id: String,
    /// ATS code being executed
    pub ats_code: String,
    /// Unix timestamp
    pub timestamp: i64,
}

/// QueryMessage represents a client message
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#querymessage>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct QueryMessage {
    /// "query", "clear", "ping", "set_verbosity", "set_graph_limit", "upload", "daemon_control", "pulse_config_update", "job_control", "visibility"
    pub r#type: String,
    /// The Ax query text (can be multi-line)
    pub query: String,
    /// Current line number (for multi-line support)
    pub line: i64,
    /// Cursor position
    pub cursor: i64,
    /// Verbosity level for set_verbosity
    pub verbosity: i64,
    /// Graph node limit for set_graph_limit
    pub graph_limit: i64,
    /// For upload messages
    pub filename: String,
    #[serde(rename = "fileType")]
    /// For upload messages: "linkedin", "vcf", etc.
    pub file_type: String,
    /// For upload messages: base64 encoded file content
    pub data: String,
    /// For daemon_control/job_control/visibility messages: "start", "stop", "pause", "resume", "details", "toggle_node_type", "toggle_isolated"
    pub action: String,
    /// For pulse_config_update messages
    pub daily_budget: f64,
    /// For pulse_config_update messages
    pub weekly_budget: f64,
    /// For pulse_config_update messages
    pub monthly_budget: f64,
    /// For job_control messages
    pub job_id: String,
    /// For visibility messages: node type to toggle
    pub node_type: String,
    /// For visibility messages: whether to hide the node type/isolated nodes
    pub hidden: bool,
}

/// ScheduledJobResponse represents a scheduled job in API responses
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#scheduledjobresponse>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct ScheduledJobResponse {
    pub id: String,
    pub ats_code: String,
    pub interval_seconds: i64,
    /// RFC3339 timestamp
    pub next_run_at: String,
    #[serde(skip_serializing_if = "Option::is_none")]
    /// RFC3339 timestamp
    pub last_run_at: Option<String>,
    /// Last async job ID
    pub last_execution_id: String,
    pub state: String,
    pub created_from_doc: String,
    pub metadata: String,
    /// RFC3339 timestamp
    pub created_at: String,
    /// RFC3339 timestamp
    pub updated_at: String,
}

/// StageInfo represents a stage with its tasks
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#stageinfo>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct StageInfo {
    pub stage: String,
    pub tasks: Vec<TaskInfo>,
}

/// StatsMessage represents import statistics
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#statsmessage>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct StatsMessage {
    /// "import_stats"
    pub r#type: String,
    /// Number of contacts imported
    pub contacts: i64,
    /// Number of attestations created
    pub attestations: i64,
    /// Number of companies found
    pub companies: i64,
}

/// StorageWarningMessage represents a bounded storage warning for approaching limits
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#storagewarningmessage>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct StorageWarningMessage {
    /// "storage_warning"
    pub r#type: String,
    /// Actor approaching limit
    pub actor: String,
    /// Context approaching limit
    pub context: String,
    /// Current attestation count
    pub current: i64,
    /// Configured limit
    pub limit: i64,
    /// Percentage full (0.0-1.0)
    pub fill_percent: f64,
    /// Human-readable time until hitting limit
    pub time_until_full: String,
    /// Unix timestamp
    pub timestamp: i64,
}

/// SystemCapabilitiesMessage represents system capability information
/// Sent once on WebSocket connection to inform client of available optimizations
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#systemcapabilitiesmessage>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct SystemCapabilitiesMessage {
    /// "system_capabilities"
    pub r#type: String,
    /// "rust" or "go" - which fuzzy matching implementation is active
    pub fuzzy_backend: String,
    /// true if using Rust (optimized), false if Go fallback
    pub fuzzy_optimized: bool,
}

/// TaskInfo represents a task within a stage
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#taskinfo>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct TaskInfo {
    pub task_id: String,
    pub log_count: i64,
}

/// TaskLogsResponse represents the response for GET /tasks/:task_id/logs
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#tasklogsresponse>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct TaskLogsResponse {
    pub task_id: String,
    pub logs: Vec<LogEntry>,
}

/// UpdateScheduledJobRequest represents the request to update a scheduled job
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#updatescheduledjobrequest>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct UpdateScheduledJobRequest {
    #[serde(skip_serializing_if = "Option::is_none")]
    /// active, paused, stopping, inactive
    pub state: Option<String>,
    #[serde(skip_serializing_if = "Option::is_none")]
    /// Update interval
    pub interval_seconds: Option<i64>,
}

/// UsageUpdateMessage represents AI usage statistics update
#[doc = "Documentation: <https://github.com/teranos/QNTX/blob/main/docs/types/server.md#usageupdatemessage>"]
#[derive(Debug, Clone, serde::Serialize, serde::Deserialize)]
pub struct UsageUpdateMessage {
    /// "usage_update"
    pub r#type: String,
    /// Total cost in last 24h
    pub total_cost: f64,
    /// Total requests
    pub requests: i64,
    /// Successful requests
    pub success: i64,
    /// Total tokens used
    pub tokens: i64,
    /// Unique models used
    pub models: i64,
    /// Time period (e.g., "24h")
    pub since: String,
    /// Unix timestamp
    pub timestamp: i64,
}
