/* eslint-disable */
// Code generated by typegen from Go source. DO NOT EDIT.
// Regenerate with: make types
// Source package: server

import { Job } from './async';
import { Execution } from './schedule';

export interface ChildJobInfo {
  id: string;
  handler_name: string;
  source: string;
  status: string;
  progress_pct?: number;
  cost_estimate?: number;
  cost_actual?: number;
  error?: string;
  created_at: string;
  started_at?: string | null;
  completed_at?: string | null;
}

export interface CompleteMessage {
  /**
   * "import_complete"
   */
  type: string;
  /**
   * Completion message
   */
  message: string;
}

export interface ConsoleFormatter {
}

export interface ConsoleLog {
  timestamp: string;
  /**
   * error, warn, info, debug
   */
  level: string;
  message: string;
  stack?: string;
  url?: string;
}

export interface CreateScheduledJobRequest {
  /**
   * ATS code to execute (e.g., "ix https://...")
   */
  ats_code: string;
  /**
   * Execution interval in seconds
   */
  interval_seconds: number;
  /**
   * Optional: ProseMirror document ID
   */
  created_from_doc?: string;
  /**
   * Optional: JSON metadata
   */
  metadata?: string;
  /**
   * Bypass deduplication checks (force execution)
   */
  force?: boolean;
}

export interface DaemonStatusMessage {
  /**
   * "daemon_status"
   */
  type: string;
  /**
   * Is daemon running
   */
  running: boolean;
  /**
   * Number of active jobs
   */
  active_jobs: number;
  /**
   * Number of queued jobs
   */
  queued_jobs: number;
  /**
   * CPU/processing load (0-100)
   */
  load_percent: number;
  /**
   * Daily budget spent
   */
  budget_daily: number;
  /**
   * Weekly budget spent
   */
  budget_weekly: number;
  /**
   * Monthly budget spent
   */
  budget_monthly: number;
  /**
   * Daily budget limit (config)
   */
  budget_daily_limit: number;
  /**
   * Weekly budget limit (config)
   */
  budget_weekly_limit: number;
  /**
   * Monthly budget limit (config)
   */
  budget_monthly_limit: number;
  /**
   * Opening/Closing Phase 4: "running", "draining", "stopped"
   */
  server_state: string;
  /**
   * Unix timestamp
   */
  timestamp: number;
}

export interface ErrorResponse {
  error: string;
}

export interface JobChildrenResponse {
  parent_job_id: string;
  children: ChildJobInfo[];
}

export interface JobStagesResponse {
  job_id: string;
  stages: StageInfo[];
}

export interface JobUpdateMessage {
  /**
   * "job_update"
   */
  type: string;
  /**
   * Full job details (from pulse/async)
   */
  job?: Job | null;
  /**
   * Additional metadata
   */
  metadata: Record<string, unknown>;
}

export interface LLMStreamMessage {
  /**
   * "llm_stream"
   */
  type: string;
  /**
   * Job ID this stream belongs to
   */
  job_id: string;
  /**
   * Optional task ID within job (for sub-tasks)
   */
  task_id?: string;
  /**
   * Token/chunk of text
   */
  content: string;
  /**
   * True when stream is complete
   */
  done: boolean;
  /**
   * Model name
   */
  model?: string;
  /**
   * Current stage (e.g., "extraction")
   */
  stage?: string;
  /**
   * Error message if streaming failed
   */
  error?: string;
}

export interface ListExecutionsResponse {
  /**
   * From pulse/schedule
   */
  executions: Execution[];
  count: number;
  total: number;
  has_more: boolean;
}

export interface ListScheduledJobsResponse {
  jobs: ScheduledJobResponse[];
  count?: number;
}

export interface LogEntry {
  timestamp: string;
  level: string;
  message: string;
  metadata?: Record<string, unknown>;
}

export interface ParsedATSCode {
  /**
   * HandlerName is the async handler to invoke (e.g., "python.script")
   */
  HandlerName: string;
  /**
   * Payload is the pre-computed JSON payload for the handler
   */
  Payload: number[];
  /**
   * SourceURL is used for deduplication
   */
  SourceURL: string;
}

export interface PluginHealthMessage {
  /**
   * "plugin_health"
   */
  type: string;
  /**
   * Plugin name
   */
  name: string;
  /**
   * Current health status
   */
  healthy: boolean;
  /**
   * "running", "paused", "stopped"
   */
  state: string;
  /**
   * Status message
   */
  message: string;
  /**
   * Unix timestamp
   */
  timestamp: number;
}

export interface PluginInfo {
  name: string;
  version: string;
  qntx_version?: string;
  description: string;
  author?: string;
  license?: string;
  healthy: boolean;
  message?: string;
  details?: Record<string, unknown>;
  state: string;
  pausable: boolean;
}

export interface PreviewSample {
  /**
   * The sampled attestation
   */
  attestation: Record<string, unknown>;
  /**
   * Prompt after template interpolation
   */
  interpolated_prompt: string;
  /**
   * LLM response
   */
  response: string;
  prompt_tokens?: number;
  completion_tokens?: number;
  total_tokens?: number;
  /**
   * Per-sample error if any
   */
  error?: string;
}

export interface ProgressMessage {
  /**
   * "import_progress"
   */
  type: string;
  /**
   * Current item being processed
   */
  current: number;
  /**
   * Total items to process
   */
  total: number;
  /**
   * Status message
   */
  message: string;
}

export interface PromptExecuteRequest {
  ax_query: string;
  template: string;
  system_prompt?: string;
  /**
   * "openrouter" or "local"
   */
  provider?: string;
  model?: string;
}

export interface PromptExecuteResponse {
  results: Result[];
  attestation_count: number;
  error?: string;
}

export interface PromptPreviewRequest {
  ax_query: string;
  /**
   * Prompt template with {{field}} placeholders
   */
  template: string;
  /**
   * Optional system instruction for the LLM
   */
  system_prompt?: string;
  /**
   * X value: number of samples to test (default: 1)
   */
  sample_size?: number;
  /**
   * "openrouter" or "local"
   */
  provider?: string;
  /**
   * Model override
   */
  model?: string;
  /**
   * Optional prompt ID for tracking
   */
  prompt_id?: string;
  /**
   * Optional prompt version for comparison
   */
  prompt_version?: number;
}

export interface PromptPreviewResponse {
  /**
   * Total matching attestations from ax query
   */
  total_attestations: number;
  /**
   * X value used for sampling
   */
  sample_size: number;
  /**
   * X sample execution results
   */
  samples: PreviewSample[];
  /**
   * Number of successful samples
   */
  success_count: number;
  /**
   * Number of failed samples
   */
  failure_count: number;
  /**
   * Global error if any
   */
  error?: string;
}

export interface PromptSaveRequest {
  name: string;
  template: string;
  system_prompt?: string;
  ax_pattern?: string;
  provider?: string;
  model?: string;
}

export interface ProseEntry {
  name: string;
  path: string;
  isDir: boolean;
  children?: ProseEntry[];
}

export interface PulseExecutionCompletedMessage {
  /**
   * "pulse_execution_completed"
   */
  type: string;
  /**
   * Job that completed
   */
  scheduled_job_id: string;
  /**
   * Execution record ID
   */
  execution_id: string;
  /**
   * ATS code that was executed
   */
  ats_code: string;
  /**
   * Created async job ID
   */
  async_job_id: string;
  /**
   * Brief result description
   */
  result_summary: string;
  /**
   * Execution duration
   */
  duration_ms: number;
  /**
   * Unix timestamp
   */
  timestamp: number;
}

export interface PulseExecutionFailedMessage {
  /**
   * "pulse_execution_failed"
   */
  type: string;
  /**
   * Job that failed
   */
  scheduled_job_id: string;
  /**
   * Execution record ID
   */
  execution_id: string;
  /**
   * ATS code that was executed
   */
  ats_code: string;
  /**
   * Error description
   */
  error_message: string;
  /**
   * Structured error details from cockroachdb/errors
   */
  error_details: string[];
  /**
   * How long before failure
   */
  duration_ms: number;
  /**
   * Unix timestamp
   */
  timestamp: number;
}

export interface PulseExecutionLogStreamMessage {
  /**
   * "pulse_execution_log_stream"
   */
  type: string;
  /**
   * Job being executed
   */
  scheduled_job_id: string;
  /**
   * Execution record ID
   */
  execution_id: string;
  /**
   * Log text chunk
   */
  log_chunk: string;
  /**
   * Unix timestamp
   */
  timestamp: number;
}

export interface PulseExecutionStartedMessage {
  /**
   * "pulse_execution_started"
   */
  type: string;
  /**
   * Job that's executing
   */
  scheduled_job_id: string;
  /**
   * Execution record ID
   */
  execution_id: string;
  /**
   * ATS code being executed
   */
  ats_code: string;
  /**
   * Unix timestamp
   */
  timestamp: number;
}

export interface QueryMessage {
  /**
   * "query", "clear", "ping", "set_verbosity", "set_graph_limit", "upload", "daemon_control", "pulse_config_update", "job_control", "visibility", "vidstream_init", "vidstream_frame", "rich_search"
   */
  type: string;
  /**
   * The Ax query text (can be multi-line)
   */
  query: string;
  /**
   * Current line number (for multi-line support)
   */
  line: number;
  /**
   * Cursor position
   */
  cursor: number;
  /**
   * Verbosity level for set_verbosity
   */
  verbosity: number;
  /**
   * Graph node limit for set_graph_limit
   */
  graph_limit: number;
  /**
   * For upload messages
   */
  filename: string;
  /**
   * For upload messages: "linkedin", "vcf", etc.
   */
  fileType: string;
  /**
   * For upload messages: base64 encoded file content
   */
  data: string;
  /**
   * For daemon_control/job_control/visibility messages: "start", "stop", "pause", "resume", "details", "toggle_node_type", "toggle_isolated"
   */
  action: string;
  /**
   * For pulse_config_update messages
   */
  daily_budget: number;
  /**
   * For pulse_config_update messages
   */
  weekly_budget: number;
  /**
   * For pulse_config_update messages
   */
  monthly_budget: number;
  /**
   * For job_control messages
   */
  job_id: string;
  /**
   * For visibility messages: node type to toggle
   */
  node_type: string;
  /**
   * For visibility messages: whether to hide the node type/isolated nodes
   */
  hidden: boolean;
  /**
   * VidStream fields (for vidstream_init and vidstream_frame messages)
   */
  model_path: string;
  /**
   * For vidstream_init: detection confidence threshold
   */
  confidence_threshold: number;
  /**
   * For vidstream_init: NMS IoU threshold
   */
  nms_threshold: number;
  /**
   * For vidstream_frame: raw frame bytes (RGBA)
   */
  frame_data: number[];
  /**
   * For vidstream_frame: frame width
   */
  width: number;
  /**
   * For vidstream_frame: frame height
   */
  height: number;
  /**
   * For vidstream_frame: "rgba8", "rgb8", etc.
   */
  format: string;
}

export interface Result {
  /**
   * SourceAttestationID is the ID of the attestation that was processed
   */
  source_attestation_id: string;
  /**
   * Prompt is the interpolated prompt that was sent to the LLM
   */
  prompt: string;
  /**
   * Response is the LLM's response
   */
  response: string;
  /**
   * ResultAttestationID is the ID of the created result attestation
   */
  result_attestation_id?: string;
  /**
   * Token usage tracking
   */
  prompt_tokens?: number;
  completion_tokens?: number;
  total_tokens?: number;
}

export interface ScheduledJobResponse {
  id: string;
  ats_code: string;
  interval_seconds?: number;
  /**
   * RFC3339 timestamp
   */
  next_run_at: string;
  /**
   * RFC3339 timestamp
   */
  last_run_at?: string | null;
  /**
   * Last async job ID
   */
  last_execution_id?: string;
  state: string;
  created_from_doc?: string;
  metadata?: string;
  /**
   * RFC3339 timestamp
   */
  created_at: string;
  /**
   * RFC3339 timestamp
   */
  updated_at: string;
}

export interface StageInfo {
  stage: string;
  tasks: TaskInfo[];
}

export interface StatsMessage {
  /**
   * "import_stats"
   */
  type: string;
  /**
   * Number of contacts imported
   */
  contacts: number;
  /**
   * Number of attestations created
   */
  attestations: number;
  /**
   * Number of companies found
   */
  companies: number;
}

export interface StorageWarningMessage {
  /**
   * "storage_warning"
   */
  type: string;
  /**
   * Actor approaching limit
   */
  actor: string;
  /**
   * Context approaching limit
   */
  context: string;
  /**
   * Current attestation count
   */
  current: number;
  /**
   * Configured limit
   */
  limit: number;
  /**
   * Percentage full (0.0-1.0)
   */
  fill_percent: number;
  /**
   * Human-readable time until hitting limit
   */
  time_until_full: string;
  /**
   * Unix timestamp
   */
  timestamp: number;
}

export interface TaskInfo {
  task_id: string;
  log_count?: number;
}

export interface TaskLogsResponse {
  task_id: string;
  logs: LogEntry[];
}

export interface UpdateScheduledJobRequest {
  /**
   * active, paused, stopping, inactive
   */
  state?: string | null;
  /**
   * Update interval
   */
  interval_seconds?: number | null;
}

export interface UsageUpdateMessage {
  /**
   * "usage_update"
   */
  type: string;
  /**
   * Total cost in last 24h
   */
  total_cost: number;
  /**
   * Total requests
   */
  requests: number;
  /**
   * Successful requests
   */
  success: number;
  /**
   * Total tokens used
   */
  tokens: number;
  /**
   * Unique models used
   */
  models: number;
  /**
   * Time period (e.g., "24h")
   */
  since: string;
  /**
   * Unix timestamp
   */
  timestamp: number;
}

