/* eslint-disable */
// Code generated by typegen from Go source. DO NOT EDIT.
// Regenerate with: make types
// Source package: async
// TODO: Migrate to proto generation (web/ts/generated/proto/)

export type ErrorCode = 'ai_error' | 'database_error' | 'file_not_found' | 'network_error' | 'parse_error' | 'timeout' | 'unknown' | 'validation_error';

export interface ErrorContext {
  /**
   * Where the error occurred
   */
  stage: string;
  /**
   * Error classification
   */
  code: ErrorCode;
  /**
   * Human-readable message
   */
  message: string;
  /**
   * Can the job be retried?
   */
  retryable: boolean;
  /**
   * Can continue processing other items?
   */
  recoverable: boolean;
}

export interface Job {
  id: string;
  /**
   * "data.batch-import", "bio.sequence-align"
   */
  handler_name: string;
  /**
   * Handler-specific data (domain-owned)
   */
  payload?: unknown;
  /**
   * For deduplication and logging
   */
  source: string;
  status: JobStatus;
  progress?: Progress;
  cost_estimate?: number;
  cost_actual?: number;
  pulse_state?: PulseState | null;
  error?: string;
  /**
   * Structured error context from errors.GetAllDetails()
   */
  error_details?: string[];
  /**
   * For tasks grouped under parent job
   */
  parent_job_id?: string;
  /**
   * Number of retry attempts (max 2)
   */
  retry_count?: number;
  created_at: string;
  started_at?: string | null;
  completed_at?: string | null;
  updated_at: string;
}

export type JobStatus = 'cancelled' | 'completed' | 'failed' | 'paused' | 'queued' | 'running';

export interface Progress {
  /**
   * Completed operations
   */
  current?: number;
  /**
   * Total operations
   */
  total?: number;
}

export interface PulseState {
  calls_this_minute?: number;
  calls_remaining?: number;
  spend_today?: number;
  spend_this_month?: number;
  budget_remaining?: number;
  is_paused?: boolean;
  /**
   * "budget_exceeded", "rate_limit", "user_requested"
   */
  pause_reason?: string;
}

export interface QueueStats {
  queued: number;
  running: number;
  paused: number;
  completed: number;
  failed: number;
  total: number;
}

export interface SystemMetrics {
  /**
   * Number of workers currently executing jobs
   */
  workers_active: number;
  /**
   * Total configured workers
   */
  workers_total: number;
  /**
   * Current memory usage in GB
   */
  memory_used_gb: number;
  /**
   * Total system memory in GB
   */
  memory_total_gb: number;
  /**
   * Memory utilization percentage
   */
  memory_percent: number;
  /**
   * Jobs waiting in queue
   */
  jobs_queued: number;
  /**
   * Jobs currently executing
   */
  jobs_running: number;
}

export interface WorkerPoolConfig {
  /**
   * Number of concurrent workers
   */
  workers: number;
  /**
   * Poll interval: nil = gradual ramp-up (default), 0 = no polling, positive = fixed interval
   */
  poll_interval?: number | null;
  /**
   * Pause jobs when budget exceeded
   */
  pause_on_budget: boolean;
  /**
   * Duration of each graceful start phase (default: 5min, test: 10s)
   */
  graceful_start_phase: number;
  /**
   * Max time to wait for workers to checkpoint and exit (default: 20s)
   */
  worker_stop_timeout: number;
  /**
   * Threshold for applying exponential backoff (default: 5)
   */
  max_consecutive_errors: number;
  /**
   * Maximum exponential backoff duration (default: 30s)
   */
  max_backoff: number;
}

