# Code generated by ats/typegen from Go source. DO NOT EDIT.
# Regenerate with: make types
# Source package: server

"""server module

Generated from Go package: server

This module contains auto-generated type definitions.
All types are Python dataclasses compatible with JSON serialization.
"""

from __future__ import annotations

from dataclasses import dataclass
from typing import Any

# ChildJobInfo represents a child job summary
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#childjobinfo
@dataclass
class ChildJobInfo:
    id: str
    handler_name: str
    source: str
    status: str
    progress_pct: float
    cost_estimate: float
    cost_actual: float
    created_at: str
    error: str | None = None
    started_at: str | None = None
    completed_at: str | None = None

# CodeEntry represents a code file or directory in the workspace
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#codeentry
@dataclass
class CodeEntry:
    name: str
    path: str
    isDir: bool
    children: list[CodeEntry] | None = None

# CompleteMessage represents import completion
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#completemessage
@dataclass
class CompleteMessage:
    # "import_complete"
    type_: str
    # Completion message
    message: str

# ConsoleLog represents a browser console message
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#consolelog
@dataclass
class ConsoleLog:
    timestamp: str
    # error, warn, info, debug
    level: str
    message: str
    stack: str | None = None
    url: str | None = None

# CreateScheduledJobRequest represents the request to create a new scheduled job
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#createscheduledjobrequest
@dataclass
class CreateScheduledJobRequest:
    # ATS code to execute (e.g., "ix https://...")
    ats_code: str
    # Execution interval in seconds
    interval_seconds: int
    # Optional: ProseMirror document ID
    created_from_doc: str
    # Optional: JSON metadata
    metadata: str
    # Bypass deduplication checks (force execution)
    force: bool | None = None

# DaemonStatusMessage represents daemon status update
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#daemonstatusmessage
@dataclass
class DaemonStatusMessage:
    # "daemon_status"
    type_: str
    # Is daemon running
    running: bool
    # Number of active jobs
    active_jobs: int
    # Number of queued jobs
    queued_jobs: int
    # CPU/processing load (0-100)
    load_percent: float
    # Daily budget spent
    budget_daily: float
    # Weekly budget spent
    budget_weekly: float
    # Monthly budget spent
    budget_monthly: float
    # Daily budget limit (config)
    budget_daily_limit: float
    # Weekly budget limit (config)
    budget_weekly_limit: float
    # Monthly budget limit (config)
    budget_monthly_limit: float
    # GRACE Phase 4: "running", "draining", "stopped"
    server_state: str
    # Unix timestamp
    timestamp: int

# ErrorResponse represents an API error
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#errorresponse
@dataclass
class ErrorResponse:
    error: str

# JobChildrenResponse represents the response for GET /api/pulse/jobs/:id/children
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#jobchildrenresponse
@dataclass
class JobChildrenResponse:
    parent_job_id: str
    children: list[ChildJobInfo]

# JobStagesResponse represents the response for GET /jobs/:job_id/stages
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#jobstagesresponse
@dataclass
class JobStagesResponse:
    job_id: str
    stages: list[StageInfo]

# JobUpdateMessage represents async IX job update
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#jobupdatemessage
@dataclass
class JobUpdateMessage:
    # "job_update"
    type_: str
    # Additional metadata
    metadata: dict[str, Any]
    # Full job details (from pulse/async)
    job: Job | None = None

# LLMStreamMessage represents streaming LLM output
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#llmstreammessage
@dataclass
class LLMStreamMessage:
    # "llm_stream"
    type_: str
    # Job ID this stream belongs to
    job_id: str
    # Token/chunk of text
    content: str
    # True when stream is complete
    done: bool
    # Optional task ID within job (for sub-tasks)
    task_id: str | None = None
    # Model name
    model: str | None = None
    # Current stage (e.g., "extraction")
    stage: str | None = None
    # Error message if streaming failed
    error: str | None = None

# ListExecutionsResponse represents the response for listing job executions
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#listexecutionsresponse
@dataclass
class ListExecutionsResponse:
    # From pulse/schedule
    executions: list[Execution]
    count: int
    total: int
    has_more: bool

# ListScheduledJobsResponse represents the response for listing scheduled jobs
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#listscheduledjobsresponse
@dataclass
class ListScheduledJobsResponse:
    jobs: list[ScheduledJobResponse]
    count: int

# LogEntry represents a single log entry
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#logentry
@dataclass
class LogEntry:
    timestamp: str
    level: str
    message: str
    metadata: dict[str, Any] | None = None

# ProgressMessage represents an import progress message
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#progressmessage
@dataclass
class ProgressMessage:
    # "import_progress"
    type_: str
    # Current item being processed
    current: int
    # Total items to process
    total: int
    # Status message
    message: str

# ProseEntry represents a prose content file or directory
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#proseentry
@dataclass
class ProseEntry:
    name: str
    path: str
    isDir: bool
    children: list[ProseEntry] | None = None

# PulseExecutionCompletedMessage represents a Pulse execution that completed successfully
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#pulseexecutioncompletedmessage
@dataclass
class PulseExecutionCompletedMessage:
    # "pulse_execution_completed"
    type_: str
    # Job that completed
    scheduled_job_id: str
    # Execution record ID
    execution_id: str
    # ATS code that was executed
    ats_code: str
    # Created async job ID
    async_job_id: str
    # Brief result description
    result_summary: str
    # Execution duration
    duration_ms: int
    # Unix timestamp
    timestamp: int

# PulseExecutionFailedMessage represents a Pulse execution that failed
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#pulseexecutionfailedmessage
@dataclass
class PulseExecutionFailedMessage:
    # "pulse_execution_failed"
    type_: str
    # Job that failed
    scheduled_job_id: str
    # Execution record ID
    execution_id: str
    # ATS code that was executed
    ats_code: str
    # Error description
    error_message: str
    # How long before failure
    duration_ms: int
    # Unix timestamp
    timestamp: int

# PulseExecutionLogStreamMessage represents live log output from a running execution
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#pulseexecutionlogstreammessage
@dataclass
class PulseExecutionLogStreamMessage:
    # "pulse_execution_log_stream"
    type_: str
    # Job being executed
    scheduled_job_id: str
    # Execution record ID
    execution_id: str
    # Log text chunk
    log_chunk: str
    # Unix timestamp
    timestamp: int

# PulseExecutionStartedMessage represents a Pulse execution that just started
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#pulseexecutionstartedmessage
@dataclass
class PulseExecutionStartedMessage:
    # "pulse_execution_started"
    type_: str
    # Job that's executing
    scheduled_job_id: str
    # Execution record ID
    execution_id: str
    # ATS code being executed
    ats_code: str
    # Unix timestamp
    timestamp: int

# QueryMessage represents a client message
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#querymessage
@dataclass
class QueryMessage:
    # "query", "clear", "ping", "set_verbosity", "set_graph_limit", "upload", "daemon_control", "pulse_config_update", "job_control", "visibility"
    type_: str
    # The Ax query text (can be multi-line)
    query: str
    # Current line number (for multi-line support)
    line: int
    # Cursor position
    cursor: int
    # Verbosity level for set_verbosity
    verbosity: int
    # Graph node limit for set_graph_limit
    graph_limit: int
    # For upload messages
    filename: str
    # For upload messages: "linkedin", "vcf", etc.
    fileType: str
    # For upload messages: base64 encoded file content
    data: str
    # For daemon_control/job_control/visibility messages: "start", "stop", "pause", "resume", "details", "toggle_node_type", "toggle_isolated"
    action: str
    # For pulse_config_update messages
    daily_budget: float
    # For pulse_config_update messages
    weekly_budget: float
    # For pulse_config_update messages
    monthly_budget: float
    # For job_control messages
    job_id: str
    # For visibility messages: node type to toggle
    node_type: str
    # For visibility messages: whether to hide the node type/isolated nodes
    hidden: bool

# ScheduledJobResponse represents a scheduled job in API responses
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#scheduledjobresponse
@dataclass
class ScheduledJobResponse:
    id: str
    ats_code: str
    interval_seconds: int
    # RFC3339 timestamp
    next_run_at: str
    # Last async job ID
    last_execution_id: str
    state: str
    created_from_doc: str
    metadata: str
    # RFC3339 timestamp
    created_at: str
    # RFC3339 timestamp
    updated_at: str
    # RFC3339 timestamp
    last_run_at: str | None = None

# StageInfo represents a stage with its tasks
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#stageinfo
@dataclass
class StageInfo:
    stage: str
    tasks: list[TaskInfo]

# StatsMessage represents import statistics
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#statsmessage
@dataclass
class StatsMessage:
    # "import_stats"
    type_: str
    # Number of contacts imported
    contacts: int
    # Number of attestations created
    attestations: int
    # Number of companies found
    companies: int

# StorageWarningMessage represents a bounded storage warning for approaching limits
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#storagewarningmessage
@dataclass
class StorageWarningMessage:
    # "storage_warning"
    type_: str
    # Actor approaching limit
    actor: str
    # Context approaching limit
    context: str
    # Current attestation count
    current: int
    # Configured limit
    limit: int
    # Percentage full (0.0-1.0)
    fill_percent: float
    # Human-readable time until hitting limit
    time_until_full: str
    # Unix timestamp
    timestamp: int

# TaskInfo represents a task within a stage
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#taskinfo
@dataclass
class TaskInfo:
    task_id: str
    log_count: int

# TaskLogsResponse represents the response for GET /tasks/:task_id/logs
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#tasklogsresponse
@dataclass
class TaskLogsResponse:
    task_id: str
    logs: list[LogEntry]

# UpdateScheduledJobRequest represents the request to update a scheduled job
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#updatescheduledjobrequest
@dataclass
class UpdateScheduledJobRequest:
    # active, paused, stopping, inactive
    state: str | None = None
    # Update interval
    interval_seconds: int | None = None

# UsageUpdateMessage represents AI usage statistics update
# Documentation: https://github.com/teranos/QNTX/blob/main/docs/types/server.md#usageupdatemessage
@dataclass
class UsageUpdateMessage:
    # "usage_update"
    type_: str
    # Total cost in last 24h
    total_cost: float
    # Total requests
    requests: int
    # Successful requests
    success: int
    # Total tokens used
    tokens: int
    # Unique models used
    models: int
    # Time period (e.g., "24h")
    since: str
    # Unix timestamp
    timestamp: int

__all__ = [
    "ChildJobInfo",
    "CodeEntry",
    "CompleteMessage",
    "ConsoleLog",
    "CreateScheduledJobRequest",
    "DaemonStatusMessage",
    "ErrorResponse",
    "JobChildrenResponse",
    "JobStagesResponse",
    "JobUpdateMessage",
    "LLMStreamMessage",
    "ListExecutionsResponse",
    "ListScheduledJobsResponse",
    "LogEntry",
    "ProgressMessage",
    "ProseEntry",
    "PulseExecutionCompletedMessage",
    "PulseExecutionFailedMessage",
    "PulseExecutionLogStreamMessage",
    "PulseExecutionStartedMessage",
    "QueryMessage",
    "ScheduledJobResponse",
    "StageInfo",
    "StatsMessage",
    "StorageWarningMessage",
    "TaskInfo",
    "TaskLogsResponse",
    "UpdateScheduledJobRequest",
    "UsageUpdateMessage",
]
