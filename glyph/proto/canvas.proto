syntax = "proto3";

package glyph;

option go_package = "github.com/teranos/QNTX/glyph/proto";

// CompositionEdge represents a directed edge in the composition DAG
// Supports multi-directional melding: horizontal (right), vertical (top/bottom)
message CompositionEdge {
  string from = 1;           // source glyph ID
  string to = 2;             // target glyph ID
  string direction = 3;      // 'right', 'top', 'bottom'
  int32 position = 4;        // ordering for multiple edges in same direction
}

// Composition represents a DAG of melded glyphs
// Replaces flat glyphIds array to support arbitrary graph topologies
message Composition {
  string id = 1;
  repeated CompositionEdge edges = 2;
  repeated string glyph_ids = 3;  // computed field: all unique glyph IDs in composition
  double x = 4;                    // anchor X position in pixels
  double y = 5;                    // anchor Y position in pixels
}
